{"ast":null,"code":"var _jsxFileName = \"D:\\\\CMU\\\\17514 CMU\\\\hw5-santorini-part2\\\\hw3-santorini-YYH1120\\\\Frontend\\\\hw5\\\\frontend\\\\src\\\\App.tsx\";\nimport Handlebars from \"handlebars\";\nimport { Component } from 'react';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar oldHref = \"http://localhost:3000\";\nvar turn = 0;\nlet GodName = new Set();\n\nfunction godnamepro(god) {\n  var godnamesplit = god.split(\" \");\n  let godnameset = new Set();\n\n  for (let i of godnamesplit) {\n    godnameset.add(i);\n  }\n\n  return godnameset;\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cells: [{\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=0&y=0\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=1&y=0\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=2&y=0\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=3&y=0\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=4&y=0\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=0&y=1\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=1&y=1\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=2&y=1\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=3&y=1\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=4&y=1\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=0&y=2\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=1&y=2\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=2&y=2\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=3&y=2\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=4&y=2\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=0&y=3\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=1&y=3\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=2&y=3\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=3&y=3\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=4&y=3\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=0&y=4\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=1&y=4\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=2&y=4\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=3&y=4\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=4&y=4\"\n      }],\n      template: this.loadTemplate(),\n      instructions: \"It is Player 0's turn\",\n      mode: \"\",\n      godtype: \"\",\n      godinfo: \"no god\"\n    };\n  }\n\n  loadTemplate() {\n    const src = document.getElementById(\"handlebars\");\n    return Handlebars.compile(src === null || src === void 0 ? void 0 : src.innerHTML, {});\n  }\n\n  convertToCell(p) {\n    const newCells = [];\n\n    for (var i = 0; i < p[\"cells\"].length; i++) {\n      var c = {\n        text: p[\"cells\"][i][\"text\"],\n        clazz: p[\"cells\"][i][\"clazz\"],\n        link: p[\"cells\"][i][\"link\"]\n      };\n      newCells.push(c);\n    }\n\n    return newCells;\n  }\n\n  getTurn(p) {\n    return p[\"turn\"];\n  }\n\n  getWinner(p) {\n    return p[\"winner\"];\n  }\n\n  getInstr(turn, winner) {\n    if (winner === undefined) return \"It is Player \" + turn + \"'s turn\";else return \"Player \" + winner + \" wins!\";\n  }\n\n  getGod(p) {\n    return p[\"god\"];\n  }\n\n  async newGame() {\n    console.log(\"2222\");\n    const response = await fetch(\"newgame\");\n    console.log(response);\n    const json = await response.json();\n    console.log(json);\n    const newCells = this.convertToCell(json);\n    this.setState({\n      cells: newCells,\n      instructions: \"It is Player 0's turn\",\n      mode: \"show\",\n      godtype: \"\",\n      godinfo: \"no 1 god\"\n    });\n  }\n\n  async general() {\n    const response = await fetch(\"general\");\n    this.setState({\n      mode: \"\",\n      godtype: \"\",\n      godinfo: \"general mode\"\n    });\n  }\n\n  async god() {\n    const response = await fetch(\"general\");\n    this.setState({\n      mode: \"\",\n      godtype: \"show\",\n      godinfo: \"god mode\"\n    });\n  }\n\n  async pan() {\n    const response = await fetch(\"pan\");\n    const json = await response.json();\n    const godname = this.getGod(json);\n    let godnameset = godnamepro(godname);\n    var godtypestate = \"show\";\n\n    if (godnameset.size >= 2) {\n      GodName = godnameset;\n      godtypestate = \"\";\n    }\n\n    console.log(godnameset);\n    this.setState({\n      mode: \"\",\n      godtype: \"show\",\n      godinfo: \"god mode\"\n    });\n  }\n\n  async demeter() {\n    const response = await fetch(\"demeter\");\n    const json = await response.json();\n    const godname = this.getGod(json);\n    let godnameset = godnamepro(godname);\n    var godtypestate = \"show\";\n\n    if (godnameset.size >= 2) {\n      GodName = godnameset;\n      godtypestate = \"\";\n    }\n\n    console.log(godnameset);\n    this.setState({\n      mode: \"\",\n      godtype: \"show\",\n      godinfo: \"god mode\"\n    });\n  }\n\n  async minotaur() {\n    const response = await fetch(\"minotaur\");\n    const json = await response.json();\n    const godname = this.getGod(json);\n    let godnameset = godnamepro(godname);\n    var godtypestate = \"show\";\n\n    if (godnameset.size >= 2) {\n      GodName = godnameset;\n      godtypestate = \"\";\n    }\n\n    console.log(godnameset);\n    this.setState({\n      mode: \"\",\n      godtype: \"show\",\n      godinfo: \"god mode\"\n    });\n  }\n\n  async play(url) {\n    const href = \"play?\" + url.split(\"?\")[1];\n    const response = await fetch(href);\n    const json = await response.json();\n    const newCells = this.convertToCell(json);\n    const turn = this.getTurn(json);\n    const winner = this.getWinner(json);\n    const instr = this.getInstr(turn, winner);\n    this.setState({\n      cells: newCells,\n      instructions: instr,\n      mode: \"\",\n      godtype: \"\",\n      godinfo: \"no god\"\n    });\n  }\n\n  async undo() {\n    const response = await fetch(\"undo\");\n    const json = await response.json();\n    const newCells = this.convertToCell(json);\n    const turn = this.getTurn(json);\n    const winner = this.getWinner(json);\n    const instr = this.getInstr(turn, winner);\n    this.setState({\n      cells: newCells,\n      instructions: instr,\n      mode: \"\",\n      godinfo: \"no god\"\n    });\n  }\n\n  async switch() {\n    if (window.location.href === \"http://localhost:3000/newgame\" && oldHref !== window.location.href) {\n      this.newGame();\n      oldHref = window.location.href;\n    } else if (window.location.href === \"http://localhost:3000/general\" && oldHref !== window.location.href) {\n      this.general();\n      oldHref = window.location.href;\n    } else if (window.location.href === \"http://localhost:3000/god\" && oldHref !== window.location.href) {\n      this.god();\n      oldHref = window.location.href;\n    } else if (window.location.href === \"http://localhost:3000/pan\" && oldHref !== window.location.href) {\n      this.pan();\n      oldHref = window.location.href;\n    } else if (window.location.href === \"http://localhost:3000/demeter\" && oldHref !== window.location.href) {\n      this.demeter();\n      oldHref = window.location.href;\n    } else if (window.location.href === \"http://localhost:3000/minotaur\" && oldHref !== window.location.href) {\n      this.minotaur();\n      oldHref = window.location.href;\n    } else if (window.location.href.split(\"?\")[0] === \"http://localhost:3000/play\" && oldHref !== window.location.href) {\n      this.play(window.location.href);\n      oldHref = window.location.href;\n    } else if (window.location.href === \"http://localhost:3000/undo\" && oldHref !== window.location.href) {\n      this.undo();\n      oldHref = window.location.href;\n    }\n  }\n\n  render() {\n    this.switch();\n    console.log(\"a\");\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: this.state.template({\n            cells: this.state.cells,\n            instructions: this.state.instructions,\n            mode: this.state.mode,\n            godtype: this.state.godtype,\n            godinfo: this.state.godinfo\n          })\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\n;\nexport default App;","map":{"version":3,"sources":["D:/CMU/17514 CMU/hw5-santorini-part2/hw3-santorini-YYH1120/Frontend/hw5/frontend/src/App.tsx"],"names":["Handlebars","Component","oldHref","turn","GodName","Set","godnamepro","god","godnamesplit","split","godnameset","i","add","App","constructor","props","state","cells","text","clazz","link","template","loadTemplate","instructions","mode","godtype","godinfo","src","document","getElementById","compile","innerHTML","convertToCell","p","newCells","length","c","push","getTurn","getWinner","getInstr","winner","undefined","getGod","newGame","console","log","response","fetch","json","setState","general","pan","godname","godtypestate","size","demeter","minotaur","play","url","href","instr","undo","switch","window","location","render","__html"],"mappings":"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","sourcesContent":["import Handlebars from \"handlebars\"\r\nimport { Component } from 'react'\r\nimport './App.css'\r\n\r\nvar oldHref = \"http://localhost:3000\"\r\nvar turn = 0\r\nlet GodName = new Set<String>();\r\n\r\nfunction godnamepro (god: String): any{\r\n  var godnamesplit = god.split(\" \");\r\n  let godnameset = new Set<String>();\r\n  for (let i of godnamesplit){\r\n    godnameset.add(i);\r\n  }\r\n  return godnameset\r\n}\r\n\r\ninterface Cell {\r\n  text: String;\r\n  clazz: String;\r\n  link: String;\r\n}\r\n\r\n\r\n\r\ninterface Cells {\r\n  cells: Array<Cell>,\r\n  template: HandlebarsTemplateDelegate<any>,\r\n  instructions: String,\r\n  mode: String,\r\n  godtype: String,\r\n  godinfo: String\r\n}\r\n\r\ninterface Props {\r\n}\r\n\r\nclass App extends Component<Props, Cells> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      cells: [\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=0&y=0\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=1&y=0\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=2&y=0\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=3&y=0\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=4&y=0\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=0&y=1\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=1&y=1\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=2&y=1\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=3&y=1\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=4&y=1\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=0&y=2\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=1&y=2\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=2&y=2\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=3&y=2\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=4&y=2\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=0&y=3\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=1&y=3\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=2&y=3\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=3&y=3\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=4&y=3\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=0&y=4\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=1&y=4\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=2&y=4\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=3&y=4\" },\r\n        { text: \"\", clazz: \"playable\", link: \"/play?x=4&y=4\" },\r\n      ],\r\n      template: this.loadTemplate(),\r\n      instructions: \"It is Player 0's turn\",\r\n      mode: \"\",\r\n      godtype: \"\",\r\n      godinfo: \"no god\"\r\n    };\r\n  }\r\n\r\n  loadTemplate (): HandlebarsTemplateDelegate<any> {\r\n    const src = document.getElementById(\"handlebars\");\r\n    return Handlebars.compile(src?.innerHTML, {});\r\n  }\r\n\r\n  convertToCell(p: any): Array<Cell> {\r\n    const newCells: Array<Cell> = [];\r\n    for (var i = 0; i < p[\"cells\"].length; i++) {\r\n\r\n        var c: Cell = {\r\n          text: p[\"cells\"][i][\"text\"],\r\n          clazz: p[\"cells\"][i][\"clazz\"],\r\n          link: p[\"cells\"][i][\"link\"],\r\n        };\r\n\r\n      newCells.push(c);\r\n    }\r\n    return newCells;\r\n  }\r\n\r\n  getTurn(p: any): String {\r\n    return p[\"turn\"]\r\n  }\r\n\r\n  getWinner(p: any): String | undefined {\r\n    return p[\"winner\"]\r\n  }\r\n\r\n  getInstr(turn: String, winner: String | undefined) {\r\n    if (winner === undefined) return \"It is Player \" + turn + \"'s turn\"\r\n    else return \"Player \" + winner + \" wins!\"\r\n  }\r\n\r\n  getGod(p:any): String {\r\n    return p[\"god\"]\r\n  }\r\n\r\n  async newGame() {\r\n    console.log(\"2222\")\r\n    const response = await fetch(\"newgame\");\r\n    console.log(response)\r\n    const json = await response.json();\r\n    console.log(json)\r\n\r\n    const newCells: Array<Cell> = this.convertToCell(json);\r\n    this.setState({ cells: newCells, instructions: \"It is Player 0's turn\", mode: \"show\",godtype:\"\", godinfo: \"no 1 god\"})\r\n  }\r\n\r\n  async general(){\r\n    const response = await fetch(\"general\");\r\n    this.setState({  mode: \"\", godtype:\"\",godinfo: \"general mode\"})\r\n  }\r\n\r\n  async god(){\r\n    const response = await fetch(\"general\");\r\n    this.setState({ mode: \"\", godtype:\"show\", godinfo: \"god mode\"})\r\n  }\r\n\r\n\r\n\r\n  async pan(){\r\n    const response = await fetch(\"pan\");\r\n    const json = await response.json();\r\n\r\n    const godname = this.getGod(json);\r\n    let godnameset = godnamepro(godname);\r\n\r\n    var godtypestate = \"show\"\r\n    if (godnameset.size >=2){\r\n      GodName = godnameset;\r\n      godtypestate = \"\"\r\n    }\r\n\r\n    console.log(godnameset)\r\n    this.setState({ mode: \"\", godtype: \"show\", godinfo: \"god mode\"})\r\n  }\r\n\r\n  async demeter(){\r\n    const response = await fetch(\"demeter\");\r\n    const json = await response.json();\r\n\r\n    const godname = this.getGod(json);\r\n    let godnameset = godnamepro(godname);\r\n\r\n    var godtypestate = \"show\"\r\n    if (godnameset.size >=2){\r\n      GodName = godnameset;\r\n      godtypestate = \"\"\r\n    }\r\n\r\n    console.log(godnameset)\r\n    this.setState({ mode: \"\", godtype: \"show\", godinfo: \"god mode\"})\r\n  }\r\n\r\n  async minotaur(){\r\n    const response = await fetch(\"minotaur\");\r\n    const json = await response.json();\r\n\r\n    const godname = this.getGod(json);\r\n    let godnameset = godnamepro(godname);\r\n\r\n    var godtypestate = \"show\"\r\n    if (godnameset.size >=2){\r\n      GodName = godnameset;\r\n      godtypestate = \"\"\r\n    }\r\n    console.log(godnameset)\r\n    this.setState({ mode: \"\", godtype: \"show\", godinfo: \"god mode\"})\r\n  }\r\n\r\n  async play(url: String) {\r\n    const href = \"play?\" + url.split(\"?\")[1];\r\n    const response = await fetch(href);\r\n    const json = await response.json();\r\n\r\n    const newCells: Array<Cell> = this.convertToCell(json);\r\n    const turn = this.getTurn(json)\r\n    const winner = this.getWinner(json)\r\n    const instr = this.getInstr(turn, winner)\r\n    this.setState({ cells: newCells, instructions: instr, mode: \"\", godtype:\"\",godinfo:\"no god\"})\r\n  }\r\n\r\n  async undo() {\r\n    const response = await fetch(\"undo\");\r\n    const json = await response.json();\r\n\r\n    const newCells: Array<Cell> = this.convertToCell(json);\r\n    const turn = this.getTurn(json)\r\n    const winner = this.getWinner(json)\r\n    const instr = this.getInstr(turn, winner)\r\n    this.setState({ cells: newCells, instructions: instr , mode:\"\", godinfo:\"no god\" })\r\n  }\r\n\r\n  async switch() {\r\n    if (\r\n      window.location.href === \"http://localhost:3000/newgame\" &&\r\n      oldHref !== window.location.href\r\n    ) {\r\n      this.newGame();\r\n      oldHref = window.location.href;\r\n    }  else if (\r\n      window.location.href === \"http://localhost:3000/general\" &&\r\n      oldHref !== window.location.href\r\n    ) {\r\n      this.general();\r\n      oldHref = window.location.href;\r\n    } else if (\r\n      window.location.href === \"http://localhost:3000/god\" &&\r\n      oldHref !== window.location.href\r\n    ) {\r\n      this.god();\r\n      oldHref = window.location.href;\r\n    } \r\n    else if (\r\n      window.location.href === \"http://localhost:3000/pan\" &&\r\n      oldHref !== window.location.href\r\n    ) {\r\n      this.pan();\r\n      oldHref = window.location.href;\r\n    } \r\n    else if (\r\n      window.location.href === \"http://localhost:3000/demeter\" &&\r\n      oldHref !== window.location.href\r\n    ) {\r\n      this.demeter();\r\n      oldHref = window.location.href;\r\n    } \r\n    else if (\r\n      window.location.href === \"http://localhost:3000/minotaur\" &&\r\n      oldHref !== window.location.href\r\n    ) {\r\n      this.minotaur();\r\n      oldHref = window.location.href;\r\n    } \r\n    else if (\r\n      window.location.href.split(\"?\")[0] === \"http://localhost:3000/play\" &&\r\n      oldHref !== window.location.href\r\n    ) {\r\n      this.play(window.location.href);\r\n      oldHref = window.location.href;\r\n    } else if (\r\n      window.location.href === \"http://localhost:3000/undo\" &&\r\n      oldHref !== window.location.href\r\n    ) {\r\n      this.undo();\r\n      oldHref = window.location.href;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    this.switch()\r\n    console.log(\"a\")\r\n    return (\r\n      <div className=\"App\">\r\n        <div\r\n          dangerouslySetInnerHTML={{\r\n            __html: this.state.template({ cells: this.state.cells, instructions: this.state.instructions, \r\n               mode: this.state.mode, godtype:this.state.godtype, godinfo: this.state.godinfo }),\r\n          }}\r\n        />\r\n      </div>\r\n    )\r\n  };\r\n};\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}